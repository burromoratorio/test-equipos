{"remainingRequest":"/home/siacadmin/Documentos/developJs/test-equipos/node_modules/babel-loader/lib/index.js!/home/siacadmin/Documentos/developJs/test-equipos/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/siacadmin/Documentos/developJs/test-equipos/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/siacadmin/Documentos/developJs/test-equipos/src/views/equipos/S2000.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/siacadmin/Documentos/developJs/test-equipos/src/views/equipos/S2000.vue","mtime":1540578242679},{"path":"/home/siacadmin/Documentos/developJs/test-equipos/node_modules/cache-loader/dist/cjs.js","mtime":1539779891905},{"path":"/home/siacadmin/Documentos/developJs/test-equipos/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/siacadmin/Documentos/developJs/test-equipos/node_modules/cache-loader/dist/cjs.js","mtime":1539779891905},{"path":"/home/siacadmin/Documentos/developJs/test-equipos/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es7.promise.finally\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Vue from 'vue';\nimport DataService from '../../services/DataService';\nvar comandos = [];\nvar trs = [];\nvar recargas = 0;\nvar equipo_id = '7702';\nvar dataservice = new DataService();\nexport default {\n  name: 's2000',\n  props: {\n    caption: {\n      type: String,\n      default: 'Table'\n    }\n  },\n  data: function data() {\n    return {\n      loading: false,\n      equipo_id: null,\n      comandos: [],\n      trs: [],\n      recargas: 0,\n      fields: [{\n        key: 'tr_id',\n        sortable: true\n      }, {\n        label: 'Usuario',\n        key: 'usuario'\n      }, {\n        key: 'estado',\n        sortable: true\n      }, {\n        label: 'ComandoID',\n        key: 'cmd_id'\n      }, {\n        label: 'Valores',\n        key: 'auxiliar'\n      }, {\n        label: 'Comando',\n        key: 'comando',\n        sortable: true\n      }, {\n        label: 'RTA',\n        key: 'respuesta'\n      }, {\n        label: 'Fecha',\n        key: 'fecha_final',\n        sortable: true\n      }, {\n        label: 'prioridad',\n        key: 'prioridad',\n        sortable: true\n      }, {\n        label: 'Estacion',\n        key: 'nombre_estacion'\n      }],\n      currentPage: 1,\n      perPage: 10,\n      totalRows: 0,\n      show: false\n    };\n  },\n  created: function created() {},\n  watch: {\n    // call again the method if the route changes\n    '$route': 'fetchData' //this.search(equipo_id);\n\n  },\n  methods: {\n    fetchData: function fetchData(equipo_id) {\n      var _this = this;\n\n      this.show = true;\n      dataservice.getComandos(equipo_id).then(function (result) {\n        _this.comandos = result.data;\n      }).then(function () {\n        _this.recargaConstante(_this.comandos);\n      });\n    },\n    getBadge: function getBadge(status) {\n      return status === 'Active' ? 'success' : status === 'Inactive' ? 'secondary' : status === 'Pending' ? 'warning' : status === 'Banned' ? 'danger' : 'primary';\n    },\n    getRowCount: function getRowCount(comandos) {\n      return comandos.length;\n    },\n    search: function search(equipo_id) {\n      this.fetchData(equipo_id);\n    },\n    testEquipo: function testEquipo(equipo_id) {\n      var _this2 = this;\n\n      dataservice.testEquipo({\n        id: equipo_id\n      }).then(function () {\n        _this2.fetchData(equipo_id);\n        /*setTimeout(function run() {\n            console.log(\"d\");\n            setTimeout(run, 1000);\n          }, 1000);*/\n        //this.$router.push({ path: '../equipos/lista/'});\n\n      });\n    },\n    recargaConstante: function recargaConstante(comandos) {\n      var trs = [];\n      var sResp = 0;\n      comandos.map(myFunction);\n\n      function myFunction(item, index) {\n        if (!item.respuesta) sResp++;\n        trs.push(item.tr_id);\n      }\n\n      this.recargas = sResp;\n      this.trs = trs;\n      console.log(this.recargas); //this.fetchData(this.trs);\n\n      /*if(this.recargas>0){\n          console.log(\"quedan : \"+this.recargas+ \" sin respuestas\");\n          console.log(new Date());\n          this.trs.map(myFunction);\n          function myFunction(item, index) {\n            console.log(item);\n            \n          }\n          var i=0;\n          do {\n            i += 1;\n            console.log(i);\n            this.search(equipo_id);\n            sleep(150000) ;\n          } while (i < this.recargas);\n        }else{\n          console.log(\"no hay comandos no itero un choto\");\n        }*/\n    }\n  }\n};\n\nfunction sleep(milliseconds) {\n  var start = new Date().getTime();\n\n  for (var i = 0; i < 1e7; i++) {\n    if (new Date().getTime() - start > milliseconds) {\n      break;\n    }\n  }\n}",{"version":3,"sources":["S2000.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"animated fadeIn\">\n    <b-row class=\"justify-content-center\">\n      <b-form>\n        <h1>Test de Comandos</h1>\n        <b-form-group>\n            <b-input-group>\n              <!-- Attach Left button -->\n              <b-input-group-prepend>\n                <b-button v-on:click=\"search(equipo_id)\" variant=\"primary\">\n                  <i class=\"fa fa-search\"></i> Search\n                </b-button>\n              </b-input-group-prepend>\n              <b-form-input type=\"text\" placeholder=\"EquipoID\" v-model=\"equipo_id\" name=\"equipo_id\"></b-form-input>\n              <b-col cols=\"6\" sm=\"4\" md=\"2\" xl class=\"mb-3 mb-xl-0\">\n                <b-button block variant=\"outline-info\" v-on:click=\"testEquipo(equipo_id)\">Test</b-button>\n              </b-col>\n            </b-input-group>\n          </b-form-group>\n      </b-form>\n    </b-row>\n    <b-row class=\"justify-content-center\">\n     <b-col sm=\"12\" md=\"4\">\n        <transition name=\"fade\" v-if=\"show\">\n          <b-card class=\"bg-secondary\" no-body >\n            <div slot=\"header\">\n              Card with header actions\n              <div class=\"card-header-actions\">\n                <b-link href=\"#\" class=\"card-header-action btn-setting\">\n                  <i class=\"icon-settings\"></i>\n                </b-link>\n                <b-link class=\"card-header-action btn-minimize\" v-b-toggle.collapse1>\n                  <i class=\"icon-arrow-up\"></i>\n                </b-link>\n                <b-link href=\"#\" class=\"card-header-action btn-close\" >\n                  <i class=\"icon-close\"></i>\n                </b-link>\n              </div>\n            </div>\n            <b-collapse id=\"collapse1\" visible>\n              <b-card-body>\n                Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat.\n              </b-card-body>\n            </b-collapse>\n          </b-card>\n        </transition>\n      </b-col>\n    </b-row>\n    <b-row>\n      <b-col>\n      <b-card :header=\"caption\">\n        <b-table small  :items=\"comandos\" :fields=\"fields\" :current-page=\"currentPage\" :per-page=\"perPage\"></b-table>\n        <nav>\n         <b-pagination :total-rows=\"getRowCount(comandos)\" :per-page=\"perPage\" v-model=\"currentPage\" prev-text=\"Prev\" next-text=\"Next\" hide-goto-end-buttons/>\n        </nav>\n      </b-card>\n      </b-col><!--/.col-->\n    </b-row><!--/.row-->\n\n  </div>\n\n</template>\n\n<script>\nimport Vue from 'vue';\nimport DataService from '../../services/DataService';\nvar comandos = [];\nvar trs=[];\nvar recargas=0; \nvar equipo_id = '7702';\nconst dataservice = new DataService();\n\nexport default {\n  name: 's2000',\n  props: {\n    caption: {\n      type: String,\n      default: 'Table'\n    }\n  },\n  data () {\n    return {\n      loading: false,\n      equipo_id: null,\n      comandos:[],\n      trs:[],\n      recargas:0,\n      fields: [\n        {\n          key : 'tr_id',\n          sortable: true\n        },      \n        {\n          label: 'Usuario',\n          key : 'usuario'\n        },\n        {\n          key : 'estado',\n          sortable: true\n        },\n        {\n          label: 'ComandoID',\n          key : 'cmd_id'\n        },\n        {\n          label: 'Valores',\n          key : 'auxiliar'\n        },\n        {\n          label: 'Comando',\n          key : 'comando',\n          sortable: true\n        },\n        {\n          label: 'RTA',\n          key : 'respuesta'\n        },\n        \n        {\n          label: 'Fecha',\n          key : 'fecha_final',\n          sortable: true\n        },\n        {\n          label: 'prioridad',\n          key : 'prioridad',\n          sortable: true\n        },\n        {\n          label: 'Estacion',\n          key : 'nombre_estacion'\n        }\n      ],\n      currentPage: 1,\n      perPage: 10,\n      totalRows: 0,\n      show: false,\n    }\n  },\n   created () {\n    },\n  watch: {\n    // call again the method if the route changes\n    '$route': 'fetchData'\n   //this.search(equipo_id);\n  },\n  methods: {\n    fetchData (equipo_id) {\n      this.show = true;\n      dataservice.getComandos(equipo_id).then( result => {\n        this.comandos = result.data; \n      }).then(()=>{\n       this.recargaConstante(this.comandos);\n      });  \n      \n    },\n    getBadge (status) {\n      return status === 'Active' ? 'success'\n        : status === 'Inactive' ? 'secondary'\n          : status === 'Pending' ? 'warning'\n            : status === 'Banned' ? 'danger' : 'primary'\n    },\n    getRowCount (comandos) {\n      return comandos.length\n    },\n    search(equipo_id){\n      this.fetchData(equipo_id);\n    },\n    testEquipo(equipo_id){\n      dataservice.testEquipo({id:equipo_id}).then(()=>{\n        this.fetchData(equipo_id);\n        /*setTimeout(function run() {\n            console.log(\"d\");\n            setTimeout(run, 1000);\n          }, 1000);*/\n        //this.$router.push({ path: '../equipos/lista/'});\n      });\n\n    },\n    recargaConstante(comandos){\n      var trs = [];\n      var sResp = 0;\n      comandos.map(myFunction);\n      function myFunction(item, index) {\n        if(!item.respuesta)sResp++\n        trs.push(item.tr_id);\n      }\n      this.recargas = sResp;\n      this.trs      = trs;\n      console.log(this.recargas);\n      //this.fetchData(this.trs);\n      /*if(this.recargas>0){\n          console.log(\"quedan : \"+this.recargas+ \" sin respuestas\");\n          console.log(new Date());\n          this.trs.map(myFunction);\n          function myFunction(item, index) {\n            console.log(item);\n            \n          }\n          var i=0;\n          do {\n            i += 1;\n            console.log(i);\n            this.search(equipo_id);\n            sleep(150000) ;\n          } while (i < this.recargas);\n        }else{\n          console.log(\"no hay comandos no itero un choto\");\n        }*/\n    }\n    \n  }\n}\nfunction sleep(milliseconds) {\n  var start = new Date().getTime();\n  for (var i = 0; i < 1e7; i++) {\n    if ((new Date().getTime() - start) > milliseconds){\n      break;\n    }\n  }\n}\n</script>\n<style scoped>\n  .fade-enter-active {\n    transition: all .3s ease;\n  }\n  .fade-leave-active {\n    transition: all .8s cubic-bezier(1.0, 0.5, 0.8, 1.0);\n  }\n  .fade-enter, .fade-leave-to {\n    transform: translateX(10px);\n    opacity: 0;\n  }\n</style>\n"],"sourceRoot":"src/views/equipos"}]}